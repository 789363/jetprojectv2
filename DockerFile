# 使用官方 Node.js 作為基礎鏡像
FROM node:latest

# 設置容器內的工作目錄
WORKDIR /app

# 將 package.json 和 package-lock.json（如果有的話）複製到容器中
COPY package*.json ./

# 安裝項目依賴
RUN npm install

# 將本地代碼複製到容器內
COPY . .

# 構建應用程序（適用於 React, Vue, Angular 等）
RUN npm run build

# 使用 nginx 作為 web 服務器
FROM nginx:alpine

# 從構建階段複製構建產物到 nginx 目錄
COPY --from=0 /app/build /usr/share/nginx/html

# 暴露 80 端口
EXPOSE 80

# 啟動 nginx
CMD ["nginx", "-g", "daemon off;"]
